
<!doctype html>
<html>
	<head>
    <meta charset="utf-8">
    <title>Three.js Layer - Google Maps API</title>
		<style>
		  html, body, #map-div {
			margin: 0;
			padding: 0;
			height: 100%;
		  }
		</style>

		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDHOZE_lUJX2mr6f41D7OqlxWxiFz3y7xg"></script>
		<script src="detector.js"></script>
		<script src="three.js"></script>
		<script src="threejs-layer.js"></script>

		<script>
			var myLayer,latitude,longitude;
			function init() { 
				function maPosition(position) {
					latitude = position.coords.latitude ;
					longitude = position.coords.longitude;
					var container = document.getElementById('map-div');
				
					var map = new google.maps.Map(container, {
						zoom: 13,
						mapTypeControl: false,
						center: new google.maps.LatLng(latitude, longitude),
						mapTypeId: google.maps.MapTypeId.TERRAIN,
					});

					myLayer = new ThreejsLayer({ map: map }, function(layer){
						if (layer.renderertype=='Canvas' || !Detector.webgl) {
							particles = new THREE.Object3D();
							material = new THREE.SpriteMaterial({
								size: 20,
								opacity: 1,
								depthTest: false,
								transparent: false
							});
						} 
					});
				}

				if(navigator.geolocation)
					navigator.geolocation.getCurrentPosition(maPosition);
			}
			document.addEventListener('DOMContentLoaded', init, false);
		</script>
	</head>

  <body>
    <div id="map-div"></div>
  </body>
</html>
