<!doctype html>
<html lang="fr">
	<head>
		<meta charset="utf-8" name='viewport' content='width=device-width, user-scalable=no'/>
		<style>
            body{
                margin:0;
                overflow:hidden;
            }
        </style>
	</head>
	<body>
		<div id="container"></div>

		<script src="https://threejs.org/build/three.js"></script>
		<script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
		<script src="https://threejs.org//examples/js/loaders/GLTFLoader.js"></script>
		<script type="text/javascript">
		
			const scene = new THREE.Scene();
			const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

			const renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );
			
			const geometry = new THREE.SphereGeometry();
			const texture = new THREE.TextureLoader().load( 'textures/monde.jpg' );
			// immediately use the texture for material creation
			const materialTex = new THREE.MeshBasicMaterial( { map: texture } );
			
			const sphere = new THREE.Mesh( geometry, materialTex );
			sphere.position.set(-1,0,0);
			scene.add( sphere );
			
			const controls = new THREE.OrbitControls( camera, renderer.domElement );
			
			var loader = new THREE.GLTFLoader();
			loader.load(
				'scene.gltf',
				function (gltf) {
					mesh = gltf.scene;
					mesh.position.set(1,0,0);
					scene.add(mesh);
				},
				function ( xhr ) {
					console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );
				},
				function ( error ) {
					console.log( 'An error happened' );
				}
			);
			
			var light = new THREE.DirectionalLight( 0xffffff,10 );
			light.position.set( 2, 1, 0 ).normalize();
			scene.add(light);
			
			var light2 = new THREE.DirectionalLight( 0xffffff ,10);
			light2.position.set( 1, 3, 0 ).normalize();
			scene.add(light2);
			
			
			camera.position.z = 4;

			const animate = function () {
				requestAnimationFrame( animate );
				
				sphere.rotation.x += 0.01;
				sphere.rotation.y += 0.01;

				renderer.render( scene, camera );
			};

			animate();
		</script>
	</body>
</html>
