<!doctype html>
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
		integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
		crossorigin=""/>
		<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
		integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
		crossorigin=""></script>
		<script type="text/javascript" src="https://stamen-maps.a.ssl.fastly.net/js/tile.stamen.js"></script>
		<title>TP2 | Leaflet</title>
		<link rel="stylesheet" type="text/css" href="css/style.css">
	</head>
	<body>
		<div id="mapid"></div>
		<p>Longitude: <b id="longitude"></b><br> Latitude: <b id="latitude"></b></p>
		<p>Distance de Marseille : <b id="distance"></b> m</p>
		<script>
			var latitude;
			var longitude;
			var acurracy;
			var map = new L.Map("mapid", {
				center: new L.LatLng(0, 0),
				zoom: 9
			});
			function maPosition(position) 
				{
					latitude = position.coords.latitude;
					longitude = position.coords.longitude;
					acurracy = position.coords.accuracy;
					map.setView(new L.LatLng(latitude, longitude), 8);
					var circle = L.circle([latitude, longitude], {
						color: 'blue',
						radius: acurracy
					}).addTo(map).bindPopup("Vous êtes approximativement à " + acurracy + " mètres de ce point").openPopup();
					var latlngMarseille = L.latLng(43.3, 5.4);
					var latlngCurrentPosition = L.latLng(latitude, longitude);
					document.getElementById("longitude").innerHTML = longitude;
					document.getElementById("latitude").innerHTML = latitude;
					document.getElementById("distance").innerHTML = latlngMarseille.distanceTo(latlngCurrentPosition);
				}
				
			if(navigator.geolocation)
				navigator.geolocation.getCurrentPosition(maPosition);
			var layer = new L.StamenTileLayer("terrain");
			map.addLayer(layer);
					
			L.marker([43.7102, 7.2620]).addTo(map);
			var polygon = L.polygon([
				[32.259265, -64.857788],
				[25.777634, -80.183716],
				[18.448347, -66.104736]
			],{ color: 'red', fillColor: '#f03'}).addTo(map);
			
			
		</script>
	</body>
</html>
